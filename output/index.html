<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="jack of all trades">
<meta name="viewport" content="width=device-width">
<title>Py, BI and Stuff | Py, BI and Stuff</title>
<link href="assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://inzaniak.github.io/pybistuffblog/index.html">
<link rel="next" href="index-1.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-90742675-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script><link rel="prefetch" href="posts/2017/04/25/python-reddit-170425.html" type="text/html">
<link href="https://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90742675-2', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
            styles, `#sidebar-checkbox` for behavior. -->
    <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
        <div class="sidebar-item">
            <p>A website about <strong>Python</strong>, <strong>Business Intelligence</strong> and<strong> Data Science</strong>. Powered by Python framework <strong>Nikola</strong>.</p>
        </div>
        
    <nav id="menu" role="navigation" class="sidebar-nav"><a class="sidebar-nav-item" href="archive.html">Archives</a>
        <a class="sidebar-nav-item" href="categories/index.html">Tags</a>
        <a class="sidebar-nav-item" href="rss.xml">RSS feed</a>
    
    
    </nav>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          
    <h3 id="brand" class="masthead-title">
      <a href="https://inzaniak.github.io/pybistuffblog/" title="Py, BI and Stuff" rel="home">Py, BI and Stuff</a>
    </h3>

        </div>
      </div>

      <div class="container content" id="content">
        

<div class="posts">
    <article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/04/25/python-reddit-170425.html" class="u-url">Python: News from Reddit, 17/04/25</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/04/25/python-reddit-170425.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-04-25T19:18:34+00:00" title="2017-04-25 19:18">2017-04-25 19:18</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/04/25/python-reddit-170425.html#disqus_thread" data-disqus-identifier="cache/posts/2017/04/25/python-reddit-170425.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <ol>
<li>Title:<strong> Self-driving vehicles with Python, TensorFlow, OpenCV, and Grand Theft Auto 5</strong><br>Author:<strong> sentdex</strong><br>Score:<strong> 707</strong><br>Url:<strong> <a href="http://www.reddit.com/r/Python/comments/665jqt/selfdriving_vehicles_with_python_tensorflow/">Reddit</a>/<a href="https://www.reddit.com/r/Python/comments/665jqt/selfdriving_vehicles_with_python_tensorflow/">Direct</a></strong><strong><br></strong>Description:<br>
Some progress on the python-powered self-driving car GTA5 project.
<br><br>
</li>
<li>Title:<strong> IPython 6.0 released – Stop Python 2 support</strong><br>Author:<strong> mbussonn</strong><br>Score:<strong> 402</strong><br>Url:<strong> <a href="http://www.reddit.com/r/Python/comments/66dq42/ipython_60_released_stop_python_2_support/">Reddit</a>/<a href="https://blog.jupyter.org/2017/04/19/release-of-ipython-6-0/">Direct</a></strong><strong><br></strong>Description:<br>
The newest release of IPython 6 is out. Python 2 support is now dropped.
<br><br>
</li>
<li>Title:<strong> Python... slowly taking over the world (Python in SQL Server 2017)</strong><br>Author:<strong> chillysurfer</strong><br>Score:<strong> 328</strong><br>Url:<strong> <a href="http://www.reddit.com/r/Python/comments/66ofa0/python_slowly_taking_over_the_world_python_in_sql/">Reddit</a>/<a href="https://blogs.technet.microsoft.com/dataplatforminsider/2017/04/19/python-in-sql-server-2017-enhanced-in-database-machine-learning/">Direct</a></strong><strong><br></strong>Description:<br>
Good news on the MSSQL front. Python will be available on SQL 2017!
<br><br>
</li>
<li>Title:<strong> Python power comes to SQL Server 2017</strong><br>Author:<strong> JonTheAndroid</strong><br>Score:<strong> 237</strong><br>Url:<strong> <a href="http://www.reddit.com/r/Python/comments/66zgtn/python_power_comes_to_sql_server_2017/">Reddit</a>/<a href="http://www.infoworld.com/article/3191187/database/python-power-comes-to-sql-server-2017.html">Direct</a></strong><strong><br></strong>Description:<br>
Infos about Python in SQL 2017
<br><br>
</li>
<li>Title:<strong> Eye blink detection with Python and OpenCV.</strong><br>Author:<strong> zionsrogue</strong><br>Score:<strong> 209</strong><br>Url:<strong> <a href="http://www.reddit.com/r/Python/comments/679ar4/eye_blink_detection_with_python_and_opencv/">Reddit</a>/<a href="http://www.pyimagesearch.com/2017/04/24/eye-blink-detection-opencv-python-dlib/">Direct</a></strong><strong><br></strong>Description:<br>
Awesome python tutorial about blink detection with OpenCV.
<br><br>
</li>
</ol>
</div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/04/20/python-count-frequencies-with-nltk.html" class="u-url">Python: Count Frequencies with NLTK</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/04/20/python-count-frequencies-with-nltk.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-04-20T15:57:33+00:00" title="2017-04-20 15:57">2017-04-20 15:57</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/04/20/python-count-frequencies-with-nltk.html#disqus_thread" data-disqus-identifier="cache/posts/2017/04/20/python-count-frequencies-with-nltk.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>Last time we learned how to use stopwords with NLTK, today we are going to take a look at counting frequencies with NLTK.</p>
<p>You can find the project <a href="https://github.com/Inzaniak/pybistuff/tree/master/NLTK%20Freq">here</a>.</p>
<p>To start we need some text to analyze. We could use some of the books which are integrated in NLTK, but I prefer to read from an external file.
The best source of free ebooks to practice your text analysis skills is <a href="http://www.gutenberg.org">gutenberg</a>. Project Gutenberg is an awesome "open source" project that offers more than 53.000 free ebooks. For this tutorial we are going to use <a href="http://www.gutenberg.org/ebooks/345">Dracula</a> by Bram Stoker, you can download it as a UTF-8 txt.</p>
<p>For this project we are going to create the folders like this:
<img class="alignnone size-full wp-image-404" src="2017/04/2017-04-20-15_16_25-prompt-dei-comandi.png" alt="2017-04-20 15_16_25-Prompt dei comandi" width="155" height="117"></p>
<p>You just need to download the utf-8 version of a book of your choice and save it as ebook.txt in data folder inside your project. You can download the stopwords from <a href="https://github.com/Inzaniak/pybistuff/tree/master/NLTK%20Freq">here</a>.</p>
<p>Let's start coding!
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">nltk</span>
<p><span style="color:#75715e;"># Let's declare a function to get word index</span>
<span style="color:#66d9ef;">def</span> <span style="color:#a6e22e;">get_index</span><span style="color:#f8f8f2;">(in_list,in_string):</span>
    <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">num,row</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">enumerate(in_list):</span>
        <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">in_string</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">row:</span>
            <span style="color:#66d9ef;">return</span> <span style="color:#f8f8f2;">num</span></p>
<p><span style="color:#75715e;"># Let's open the book we downloaded</span>
<span style="color:#f8f8f2;">book</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">open(</span><span style="color:#e6db74;">'data/ebook.txt'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">'r'</span><span style="color:#f8f8f2;">)</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">read()</span>
<span style="color:#75715e;"># Divide text by rows</span>
<span style="color:#f8f8f2;">rows</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">book</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\n</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">)</span>
</p></pre>
<code>
import nltk</code>
We import the necessary library as usual
<p><code>get_index()</code>
We define a simple function which helps us find the index of a word inside of a list. We loop for every row and if we find the string we return the index of the string</p>
<p><code>open() and split()</code>
We load the book into a variable as a string and then we split it into lines
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Search for START and END tags to remove useless parts</span>
<span style="color:#f8f8f2;">start_idx</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">get_index(rows,</span><span style="color:#e6db74;">'<strong><em> START'</em></strong></span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">end_idx</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">get_index(rows,</span><span style="color:#e6db74;">' END'</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">rows</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">rows[start_idx</span><span style="color:#f92672;">+</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">:end_idx]</span>
</pre>
Now we look for START and END tags in our list and we redefine the list omitting the lines which are added by gutemberg.org.
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Create a list of words by converting to lowercase and splitting</span>
<span style="color:#f8f8f2;">words</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[s</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">lower()</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split()</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">s</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">rows</span> <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">s]</span>
<span style="color:#75715e;"># Convert the list of lists into a flat list</span>
<span style="color:#f8f8f2;">words</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[sublist</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">l</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">words</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">sublist</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">l]</span>
<p><span style="color:#75715e;"># Import the stopwords</span>
<span style="color:#f8f8f2;">stop</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">open(</span><span style="color:#e6db74;">'data/stop.txt'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">'r'</span><span style="color:#f8f8f2;">)</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">read()</span>
<span style="color:#75715e;"># Split the stopwords by line</span>
<span style="color:#f8f8f2;">stop</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">stop</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\n</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">)</span></p>
<p><span style="color:#75715e;"># Remove punctuation and numbers from words</span>
<span style="color:#f8f8f2;">words</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[</span><span style="color:#e6db74;">''</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">join(c</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">c</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">w</span> <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">c</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">isalpha())</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">w</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">words]</span>
<span style="color:#75715e;"># Remove stopwords and blanks from words</span>
<span style="color:#f8f8f2;">words</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[w</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">w</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">words</span> <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">w</span> <span style="color:#f92672;">not</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">stop</span> <span style="color:#f92672;">and</span> <span style="color:#f8f8f2;">w</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">isalpha()]</span>
</p></pre>
We create a list of words by following these steps:
<ul>
<li>Convert all the rows to lowercase and split the row into words</li>
    <li>Flatten the list of lists into a single list of words</li>
    <li>Load the stopwords and split them by line</li>
    <li>Remove punctuation from words</li>
    <li>Remove stopwords and empty elements from words</li>
</ul>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Let's load the word into NLTK</span>
<span style="color:#f8f8f2;">text</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">nltk</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">Text(words)</span>
<p><span style="color:#75715e;"># Calculate Frequency distribution</span>
<span style="color:#f8f8f2;">freq</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">nltk</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">FreqDist(text)</span></p>
<p><span style="color:#75715e;"># Print and plot most common words</span>
<span style="color:#f8f8f2;">freq</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">most_common(</span><span style="color:#ae81ff;">20</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">freq</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">plot(</span><span style="color:#ae81ff;">10</span><span style="color:#f8f8f2;">)</span>
</p></pre>
Now we can load our words into NLTK and calculate the frequencies by using FreqDist(). After this we can use .most_common(20) to show in console 20 most common words or .plot(10) to show a line plot representing word frequencies:
<img class="alignnone size-full wp-image-449" src="2017/04/2017-04-20-15_47_21-figure-1.png" alt="2017-04-20 15_47_21-Figure 1" width="642" height="580"><p>Pretty boring words, how can we improve the output?
We can use bigrams to show more relevant data. From Wikipedia: A <b>bigram</b> or <b>digram</b> is a sequence of two adjacent elements from a string of tokens, which are typically letters, syllables, or words.
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Get Bigrams from text</span>
<span style="color:#f8f8f2;">bigrams</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">nltk</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">bigrams(text)</span>
<p><span style="color:#75715e;"># Calculate Frequency Distribution for Bigrams</span>
<span style="color:#f8f8f2;">freq_bi</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">nltk</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">FreqDist(bigrams)</span></p>
<p><span style="color:#75715e;"># Print and plot most common bigrams</span>
<span style="color:#f8f8f2;">freq_bi</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">most_common(</span><span style="color:#ae81ff;">20</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">freq_bi</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">plot(</span><span style="color:#ae81ff;">10</span><span style="color:#f8f8f2;">)</span>
</p></pre>
After creating the bigrams we can plot them:
<img class="alignnone size-full wp-image-458" src="2017/04/2017-04-20-15_56_03-figure-1.png" alt="2017-04-20 15_56_03-Figure 1.png" width="749" height="772"><p>Pretty cool, right?</p>
<p>That's it for today. Have fun experimenting with word frequencies</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/04/19/python-quick-stopwords-with-nltk.html" class="u-url">Python: Quick Stopwords with NLTK</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/04/19/python-quick-stopwords-with-nltk.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-04-19T08:00:15+00:00" title="2017-04-19 08:00">2017-04-19 08:00</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/04/19/python-quick-stopwords-with-nltk.html#disqus_thread" data-disqus-identifier="cache/posts/2017/04/19/python-quick-stopwords-with-nltk.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>One of the most tedious task in Text Analytics is cleaning raw text.
Fortunately NLTK has a lot of tools to help you in this task. One of the most important is <strong>nltk.corpus.stopwords</strong> which contains stopwords for 11 languages.</p>
<p>Let's start coding:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">nltk</span>
<span style="color:#f8f8f2;">nltk</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">download()</span>
</pre>
First step is to install the stopwords so we run <strong>nltk.download()</strong>.
<p><img class="alignnone size-full wp-image-367" src="2017/04/2017-04-18-12_48_29-nltk-downloader.png" alt="2017-04-18 12_48_29-NLTK Downloader" width="757" height="597"></p>
<p>Then we choose Corpora -&gt; Stopwords -&gt; Download</p>
<p><img class="alignnone size-full wp-image-370" src="2017/04/2017-04-18-12_50_19-nltk-downloader.png" alt="2017-04-18 12_50_19-NLTK Downloader.png" width="757" height="597"></p>
<p>Back to coding!
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">from</span> <span style="color:#f8f8f2;">nltk.corpus</span> <span style="color:#66d9ef;">import</span> <span style="color:#f8f8f2;">stopwords</span>
<span style="color:#f8f8f2;">stop</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">stopwords</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">words(</span><span style="color:#e6db74;">'english'</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">print(stop[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">:</span><span style="color:#ae81ff;">5</span><span style="color:#f8f8f2;">])</span>
<span style="color:#75715e;"># ['i', 'me', 'my', 'myself', 'we']</span>
<span style="color:#f8f8f2;">print(type(stop))</span>
<span style="color:#75715e;"># &lt;class 'list'&gt;</span>
</pre>
The first line imports the corpus.reader, then we store into a variable the words contained in "English Stopwords". The words are returned as a list, so we can easily navigate them.
<p>But how do we use them?
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f8f8f2;">sentence</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">'NLTK is a leading platform for building Python programs to work with human language data.'</span>
<span style="color:#75715e;"># With Generator</span>
<span style="color:#f8f8f2;">keywords</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[w</span> <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">w</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">sentence</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split()</span> <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">w</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">lower()</span> <span style="color:#f92672;">not</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">stop]</span>
<span style="color:#f8f8f2;">print(keywords)</span>
<span style="color:#75715e;"># ['NLTK', 'leading', 'platform', 'building', 'Python', 'programs', 'work', 'human', 'language', 'data.']</span>
<p><span style="color:#75715e;"># Without Generator</span>
<span style="color:#f8f8f2;">keywords</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[]</span>
<span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">word</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">sentence</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split():</span>
    <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">word</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">lower()</span> <span style="color:#f92672;">not</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">stop:</span>
        <span style="color:#f8f8f2;">keywords</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">append(word)</span>
<span style="color:#f8f8f2;">print(keywords)</span>
<span style="color:#75715e;"># ['NLTK', 'leading', 'platform', 'building', 'Python', 'programs', 'work', 'human', 'language', 'data.']</span>
</p></pre>
We use a simple sentence as input. Then we use a generator or a "for loop" to create a list of keywords, by ignoring all the words that are not in our stopwords list.
We use word.lower() because all the words in the stopwords list are lowercase.
<p>That's it, this is the fastest way to implement stopwords using NLTK.
Have fun</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/04/18/sql-find-running-queries-with-a-simple-t-sql-script.html" class="u-url">SQL: Find running queries with a simple T-SQL Script</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/04/18/sql-find-running-queries-with-a-simple-t-sql-script.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-04-18T12:38:25+00:00" title="2017-04-18 12:38">2017-04-18 12:38</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/04/18/sql-find-running-queries-with-a-simple-t-sql-script.html#disqus_thread" data-disqus-identifier="cache/posts/2017/04/18/sql-find-running-queries-with-a-simple-t-sql-script.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>Today i want to share a simple snippet of code which I find useful from time to time.
With this code you can check if a query is running on your db in a quick and effective way.
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#66d9ef;">SELECT</span> 
    <span style="color:#f8f8f2;">sqltext.TEXT,</span> 
    <span style="color:#f8f8f2;">req.session_id,</span> 
    <span style="color:#f8f8f2;">req.status,</span> 
    <span style="color:#f8f8f2;">req.command,</span> 
    <span style="color:#f8f8f2;">req.cpu_time,</span> 
    <span style="color:#f8f8f2;">req.total_elapsed_time</span> 
<span style="color:#66d9ef;">FROM</span> <span style="color:#f8f8f2;">sys.dm_exec_requests</span> <span style="color:#f8f8f2;">req</span> 
    <span style="color:#66d9ef;">CROSS</span> <span style="color:#f8f8f2;">APPLY</span> <span style="color:#f8f8f2;">sys.dm_exec_sql_text(sql_handle)</span> <span style="color:#66d9ef;">AS</span> <span style="color:#f8f8f2;">sqltext</span>
</pre>
That's it, have a nice day :)</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/04/11/python-sql-how-to-connect-to-sql-via-python-pyodbc.html" class="u-url">Python, SQL: How to connect to SQL via Python pyodbc</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/04/11/python-sql-how-to-connect-to-sql-via-python-pyodbc.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-04-11T15:26:44+00:00" title="2017-04-11 15:26">2017-04-11 15:26</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/04/11/python-sql-how-to-connect-to-sql-via-python-pyodbc.html#disqus_thread" data-disqus-identifier="cache/posts/2017/04/11/python-sql-how-to-connect-to-sql-via-python-pyodbc.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>As a SQL/Python coder, one of the library i use the most is <em><a href="https://github.com/mkleehammer/pyodbc/wiki">pyodbc</a>.
</em><i>p</i>yodbc is an open source Python module that makes accessing ODBC databases simple. It implements the <a href="https://www.python.org/dev/peps/pep-0249">DB API 2.0</a> specification but is packed with even more Pythonic convenience.</p>
<p>Let's start coding then!
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Let's import the library</span>
<span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">pyodbc</span>
<p><span style="color:#75715e;"># Here we set the connection variables</span>
<span style="color:#f8f8f2;">server</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">'your_server_name'</span>
<span style="color:#f8f8f2;">database</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">'your_db_name'</span>
<span style="color:#75715e;"># Username and password if you use a SQL account. Otherwise it will use</span>
<span style="color:#75715e;"># Windows Authentication</span>
<span style="color:#f8f8f2;">username</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">'your_username'</span>
<span style="color:#f8f8f2;">password</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">'your_password'</span>
<span style="color:#75715e;"># The driver you are going to use.</span>
<span style="color:#f8f8f2;">driver</span><span style="color:#f92672;">=</span> <span style="color:#e6db74;">'{ODBC Driver 13 for SQL Server}'</span></p>
<p><span style="color:#75715e;"># Let's Create a connection and a cursor</span>
<span style="color:#f8f8f2;">conn</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">pyodbc</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">connect(</span><span style="color:#e6db74;">'DRIVER='</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">driver</span>
                      <span style="color:#f92672;">+</span><span style="color:#e6db74;">';PORT=1433;SERVER='</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">server</span>
                      <span style="color:#f92672;">+</span><span style="color:#e6db74;">';DATABASE='</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">database</span>
                      <span style="color:#f92672;">+</span><span style="color:#e6db74;">';UID='</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">username</span><span style="color:#f92672;">+</span><span style="color:#e6db74;">';PWD='</span><span style="color:#f92672;">+</span> <span style="color:#f8f8f2;">password)</span>
<span style="color:#f8f8f2;">cursor</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">conn</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">cursor()</span>
</p></pre>
The first step is to import the library. If you need to install it: pip install pyodbc.
<p>After importing the library we need to set up the connection variables.
You'll need you server name, database name and username and password. If you don't have a User because you are using Windows Authentication, just remove the variables from the connection string.
The driver variable is the driver version you are using to connect to SQL. If you can't connect because of a driver error, just Google download odbc driver 13 :) .</p>
<p>To connect to SQL we need to pass the variables to the pyodbc.connect() function.
Then we need to create a cursor by using the conn.cursor()
</p>
<h3>Select</h3>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># SELECT</span>
<span style="color:#f8f8f2;">cursor</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">execute(</span><span style="color:#e6db74;">"SELECT FROM dbo.your_table"</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">rows</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">cursor</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">fetchall()</span>
<span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">row</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">rows:</span>
    <span style="color:#f8f8f2;">print(row[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">],row[</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">])</span>
</pre>
To communicate with SQL, we use cursor.execute(). You just need to pass a query and use fetchone() or fetchall() to return the result.
With fetchall() you can loop over the rows by using a for loop.
<h3>Insert/Update/Delete etc...</h3>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># INSERT</span>
<span style="color:#f8f8f2;">cursor</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">execute(</span><span style="color:#e6db74;">"INSERT into dbo.your_table VALUES ('test')"</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">cursor</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">commit()</span>
</pre>
To run an insert,update or delete you just need to execute the statement and the commit it to the server.
<p>That's all for today!</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/03/28/python-news-from-the-reddit-last-week-of-march.html" class="u-url">Python: News from the Reddit, last week of March</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/03/28/python-news-from-the-reddit-last-week-of-march.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-03-28T15:26:51+00:00" title="2017-03-28 15:26">2017-03-28 15:26</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/03/28/python-news-from-the-reddit-last-week-of-march.html#disqus_thread" data-disqus-identifier="cache/posts/2017/03/28/python-news-from-the-reddit-last-week-of-march.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>These are the most voted posts on Python Reddit last week:
</p>
<h3>Better-Exceptions</h3>
A nice library which adds prettier and more helpful exceptions
<img class="alignnone size-full wp-image-276" src="2017/03/screenshot.png" alt="screenshot" width="1082" height="452">
Direct Link: <a href="https://github.com/Qix-/better-exceptions">https://github.com/Qix-/better-exceptions
</a>Reddit: <a href="https://github.com/Qix-/better-exceptions">https://github.com/Qix-/better-exceptions</a>
<h3>Opencv Python Drone</h3>
This is a youtube video in which a drone uses opencv to track the person who is holding a orange object.
[youtube https://www.youtube.com/watch?v=zCdacGMnlO0&amp;w=560&amp;h=315]
<h3>Audio Signal Processing Course</h3>
A free course on coursera about signal processing specifically tailored for audio files and music. As a music enthusiast i really reccomend to follow this.
Direct Link: <a href="https://www.coursera.org/learn/audio-signal-processing">https://www.coursera.org/learn/audio-signal-processing</a>
Reddit: <a href="https://www.reddit.com/r/Python/comments/61eppg/audio_signal_processing_for_music_applications_a/">https://www.reddit.com/r/Python/comments/61eppg/audio_signal_processing_for_music_applications_a/</a>
<h3>Pycharm debugging is 40x faster!</h3>
I love Pycharm and it seems that, thanks to Python 3.6, the debugger just got faster. If you want to read about it just follow the links:
Direct Link: <a href="https://mail.python.org/pipermail/python-dev/2017-March/147681.html">https://mail.python.org/pipermail/python-dev/2017-March/147681.html</a>
Reddit: <a href="https://www.reddit.com/r/Python/comments/61hokj/pythondev_pycharm_debugger_became_40x_faster_on/">https://www.reddit.com/r/Python/comments/61hokj/pythondev_pycharm_debugger_became_40x_faster_on/</a>
<h3>Python Automation Thread</h3>
There are no words to describe the content of this thread. It's funny and it's Python; just read it!
Reddit: <a href="https://www.reddit.com/r/Python/comments/61vbni/rpython_what_are_some_of_the_coolest_things_youve/">https://www.reddit.com/r/Python/comments/61vbni/rpython_what_are_some_of_the_coolest_things_youve/</a>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/03/27/python-learning-lambda-functions-and-map-filter-and-reduce.html" class="u-url">Python: Learning Lambda Functions and map, filter and reduce.</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/03/27/python-learning-lambda-functions-and-map-filter-and-reduce.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-03-27T17:20:03+00:00" title="2017-03-27 17:20">2017-03-27 17:20</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/03/27/python-learning-lambda-functions-and-map-filter-and-reduce.html#disqus_thread" data-disqus-identifier="cache/posts/2017/03/27/python-learning-lambda-functions-and-map-filter-and-reduce.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>Python supports the creation of anonymous functions at runtime, using a construct called "<strong>lambda</strong>".</p>
<p>Let's see an example:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Standard way to define a function</span>
<span style="color:#66d9ef;">def</span> <span style="color:#a6e22e;">my_func</span><span style="color:#f8f8f2;">(in_num):</span>
    <span style="color:#66d9ef;">return</span> <span style="color:#f8f8f2;">in_num</span><span style="color:#f92672;">*</span><span style="color:#f8f8f2;">in_num</span>
<p><span style="color:#75715e;"># Lambda way</span>
<span style="color:#f8f8f2;">my_func_l</span> <span style="color:#f92672;">=</span> <span style="color:#66d9ef;">lambda</span> <span style="color:#f8f8f2;">x:</span> <span style="color:#f8f8f2;">x</span><span style="color:#f92672;">*</span><span style="color:#f8f8f2;">x</span></p></pre>
Both of the functions return the same result, but are declared in different ways.<img class="alignnone size-full wp-image-233" src="2017/03/result.png" alt="result" width="159" height="77"><p>So the question is: "When is it useful to use a lambda function?".
I find it particularly useful when i'm working on "dynamic" functions:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#66d9ef;">def</span> <span style="color:#a6e22e;">my_func</span><span style="color:#f8f8f2;">(n):</span>
    <span style="color:#66d9ef;">return</span> <span style="color:#66d9ef;">lambda</span> <span style="color:#f8f8f2;">x:x</span><span style="color:#f92672;">*</span><span style="color:#f8f8f2;">n</span>
<p><span style="color:#75715e;"># This creates the anonymous function by defining the n value</span>
<span style="color:#f8f8f2;">f</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">my_func(</span><span style="color:#ae81ff;">2</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">g</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">my_func(</span><span style="color:#ae81ff;">4</span><span style="color:#f8f8f2;">)</span></p>
<p><span style="color:#75715e;"># This calls the function by passing the parameter x</span>
<span style="color:#f8f8f2;">f(</span><span style="color:#ae81ff;">5</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">g(</span><span style="color:#ae81ff;">3</span><span style="color:#f8f8f2;">)</span></p>
<p><span style="color:#75715e;"># You can also call the function without assigning it</span>
<span style="color:#f8f8f2;">my_func(</span><span style="color:#ae81ff;">2</span><span style="color:#f8f8f2;">)(</span><span style="color:#ae81ff;">8</span><span style="color:#f8f8f2;">)</span>
</p></pre>
But Lambdas functions are often used with map, filter and reduce.
<h3>Map</h3>
<strong>Map</strong> applies a function to all the items in an input_list.
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Let's declare a simple list of number</span>
<span style="color:#f8f8f2;">items</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">2</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">3</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">4</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">5</span><span style="color:#f8f8f2;">]</span>
<span style="color:#75715e;"># We create a Lambda that does the square for the number</span>
<span style="color:#75715e;"># and apply it to the list by using map</span>
<span style="color:#f8f8f2;">list(map(</span><span style="color:#66d9ef;">lambda</span> <span style="color:#f8f8f2;">x:x</span><span style="color:#f92672;"><em></em></span><span style="color:#f8f8f2;">x,items))
<span style="color:#ffcc99;">Out[354]: [1, 4, 9, 16, 25]</span></span>
</pre>
This is a really fast way to apply a function on a list. It is really useful if you need to use it once.
<h3>Filter</h3>
<strong>Filter </strong>creates a list of elements for which a function returns true.
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Let's declare a simple list of number</span>
<span style="color:#f8f8f2;">items</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">2</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">3</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">4</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">5</span><span style="color:#f8f8f2;">]</span>
<span style="color:#75715e;"># We create a Lambda that check if the number is even</span>
<span style="color:#75715e;"># and apply it to the list by using filter</span>
<span style="color:#f8f8f2;">list(filter(</span><span style="color:#66d9ef;">lambda</span> <span style="color:#f8f8f2;">x:</span> <span style="color:#f8f8f2;">x</span><span style="color:#f92672;">%</span><span style="color:#ae81ff;">2</span> <span style="color:#f92672;">==</span> <span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">,</span> <span style="color:#f8f8f2;">items))</span>
<span style="color:#ffcc99;">Out[356]: [2, 4]
</span></pre>
By using filter you can clean your list easily.
<h3>Reduce</h3>
<strong>Reduce </strong>is a really useful function for performing some computation on a list and returning the result.
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># We need to import reduce from functools library</span>
<span style="color:#f92672;">from</span> <span style="color:#f8f8f2;">functools</span> <span style="color:#66d9ef;">import</span> <span style="color:#f8f8f2;">reduce</span>
<span style="color:#75715e;"># Let's declare a simple list of number</span>
<span style="color:#f8f8f2;">items</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">2</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">3</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">4</span><span style="color:#f8f8f2;">,</span> <span style="color:#ae81ff;">5</span><span style="color:#f8f8f2;">]</span>
<span style="color:#75715e;"># We create a Lambda that compute the product of the integers</span>
<span style="color:#75715e;"># and apply it to the list by using reduce</span>
<span style="color:#f8f8f2;">reduce(</span><span style="color:#66d9ef;">lambda</span> <span style="color:#f8f8f2;">x,y:</span> <span style="color:#f8f8f2;">x</span><span style="color:#f92672;"></span><span style="color:#f8f8f2;">y,</span> <span style="color:#f8f8f2;">items)
<span style="color:#ffcc99;">Out[363]: 120</span></span>
</pre>
 
<p>And that's all for today!</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/03/24/python-how-to-work-with-json.html" class="u-url">Python: How to work with Json</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/03/24/python-how-to-work-with-json.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-03-24T14:21:25+00:00" title="2017-03-24 14:21">2017-03-24 14:21</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/03/24/python-how-to-work-with-json.html#disqus_thread" data-disqus-identifier="cache/posts/2017/03/24/python-how-to-work-with-json.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>One of the most used format these days (especially online) is the Javascript Object Notation (JSON). At first sight it can be a little confusing, but after using it a few times it won't be a problem anymore.</p>
<p>So what's the best way to read Json in Python?
Luckily for you (and me) there is an awesome library integrated within Python named "json".</p>
<p>Let's start with a Json available on <a href="http://json.org/example.html">http://json.org/example.html</a>:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f8f8f2;">{</span>
    <span style="color:#f92672;">"glossary"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span>
        <span style="color:#f92672;">"title"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"example glossary"</span><span style="color:#f8f8f2;">,</span>
        <span style="color:#f92672;">"GlossDiv"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span>
            <span style="color:#f92672;">"title"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"S"</span><span style="color:#f8f8f2;">,</span>
            <span style="color:#f92672;">"GlossList"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span>
                <span style="color:#f92672;">"GlossEntry"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span>
                    <span style="color:#f92672;">"ID"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span>
                    <span style="color:#f92672;">"SortAs"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span>
                    <span style="color:#f92672;">"GlossTerm"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Standard Generalized Markup Language"</span><span style="color:#f8f8f2;">,</span>
                    <span style="color:#f92672;">"Acronym"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span>
                    <span style="color:#f92672;">"Abbrev"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"ISO 8879:1986"</span><span style="color:#f8f8f2;">,</span>
                    <span style="color:#f92672;">"GlossDef"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span>
                        <span style="color:#f92672;">"para"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"A meta-markup language, used to create markup languages such as DocBook."</span><span style="color:#f8f8f2;">,</span>
                        <span style="color:#f92672;">"GlossSeeAlso"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">[</span><span style="color:#e6db74;">"GML"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"XML"</span><span style="color:#f8f8f2;">]</span>
                    <span style="color:#f8f8f2;">},</span>
                    <span style="color:#f92672;">"GlossSee"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"markup"</span>
                <span style="color:#f8f8f2;">}</span>
            <span style="color:#f8f8f2;">}</span>
        <span style="color:#f8f8f2;">}</span>
    <span style="color:#f8f8f2;">}</span>
<span style="color:#f8f8f2;">}</span>
</pre>
There are a few tools that help you format and read Json, these are the ones i use often:
<ul>
<li>
<a href="http://jsonviewer.stack.hu">http://jsonviewer.stack.hu</a>: This is a really awesome site which helps you understand the content of the Json</li>
    <li>
<a href="http://atom.io">atom.io</a>: An awesome text editor that supports a lot of extension. I really suggest you to take a look at it</li>
</ul>
So let's take a look at this Json structure on Jsonviewer:
<p><img class="alignnone size-full wp-image-202" src="2017/03/jsonviewer.png" alt="Jsonviewer" width="723" height="416"></p>
<p>Now, what are the first steps to import this data structure into our python script?
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">json</span>
<p><span style="color:#f8f8f2;">json_string</span> <span style="color:#f92672;">=</span> <span style="color:#e6db74;">"""</span>
<span style="color:#e6db74;">{</span>
<span style="color:#e6db74;">    "glossary": {</span>
<span style="color:#e6db74;">        "title": "example glossary",</span>
<span style="color:#e6db74;">       "GlossDiv": {</span>
<span style="color:#e6db74;">            "title": "S",</span>
<span style="color:#e6db74;">           "GlossList": {</span>
<span style="color:#e6db74;">                "GlossEntry": {</span>
<span style="color:#e6db74;">                    "ID": "SGML",</span>
<span style="color:#e6db74;">                   "SortAs": "SGML",</span>
<span style="color:#e6db74;">                   "GlossTerm": "Standard Generalized Markup Language",</span>
<span style="color:#e6db74;">                   "Acronym": "SGML",</span>
<span style="color:#e6db74;">                   "Abbrev": "ISO 8879:1986",</span>
<span style="color:#e6db74;">                   "GlossDef": {</span>
<span style="color:#e6db74;">                        "para": "A meta-markup language, used to create markup languages such as DocBook.",</span>
<span style="color:#e6db74;">                       "GlossSeeAlso": ["GML", "XML"]</span>
<span style="color:#e6db74;">                    },</span>
<span style="color:#e6db74;">                   "GlossSee": "markup"</span>
<span style="color:#e6db74;">                }</span>
<span style="color:#e6db74;">            }</span>
<span style="color:#e6db74;">        }</span>
<span style="color:#e6db74;">    }</span>
<span style="color:#e6db74;">}</span>
<span style="color:#e6db74;">"""</span></p>
<p><span style="color:#f8f8f2;">my_json</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">json</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">loads(json_string)</span>
<span style="color:#f8f8f2;">print(my_json)</span>
</p></pre>
The first step is to import the library we are going to use: "json". Then we create a string which contains the Json we are going to read. Now that we have our Json we load it into a variable by using <em>json.loads() </em>and print the result:
<p><img class="alignnone size-full wp-image-211" src="2017/03/jsonout1.png" alt="JsonOut1" width="1564" height="175"></p>
<p>We can see that the Json we loaded is outputted as a python Dict, which is convenient for us.
To navigate it you just need to use the syntax you'll use with a Dict:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f8f8f2;">print(my_json[</span><span style="color:#e6db74;">'glossary'</span><span style="color:#f8f8f2;">][</span><span style="color:#e6db74;">'title'</span><span style="color:#f8f8f2;">])</span>
<span style="color:#75715e;"># returns: example glossary</span>
<span style="color:#f8f8f2;">print(my_json[</span><span style="color:#e6db74;">'glossary'</span><span style="color:#f8f8f2;">][</span><span style="color:#e6db74;">'GlossDiv'</span><span style="color:#f8f8f2;">])</span>
<span style="color:#75715e;"># returns: a dict</span>
</pre>
That's pretty awesome right? But what if i need to output the json as is? There is a simple method in the json library named <em>dumps()</em> that does just what we need:
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f8f8f2;">print(json</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">dumps(my_json))</span>
<span style="color:#f92672;">&gt;&gt;</span><span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"glossary"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"title"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"example glossary"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"GlossDiv"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"title"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"S"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"GlossList"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"GlossEntry"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"ID"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"GlossTerm"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Standard Generalized Markup Language"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"Acronym"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"GlossSee"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"markup"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"SortAs"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"SGML"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"Abbrev"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"ISO 8879:1986"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"GlossDef"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">{</span><span style="color:#e6db74;">"GlossSeeAlso"</span><span style="color:#f8f8f2;">:</span> <span style="color:#f8f8f2;">[</span><span style="color:#e6db74;">"GML"</span><span style="color:#f8f8f2;">,</span> <span style="color:#e6db74;">"XML"</span><span style="color:#f8f8f2;">],</span> <span style="color:#e6db74;">"para"</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"A meta-markup language, used to create markup languages such as DocBook."</span><span style="color:#f8f8f2;">}}}}}}</span>
</pre>
 
<p>I think that's all for this session! Thanks for reading.</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/03/16/python-get-method.html" class="u-url">Python: .get() method</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/03/16/python-get-method.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-03-16T15:44:31+00:00" title="2017-03-16 15:44">2017-03-16 15:44</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/03/16/python-get-method.html#disqus_thread" data-disqus-identifier="cache/posts/2017/03/16/python-get-method.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>One of the most annoying things that happens to me when i'm working with json extracted from social networks is the absence of some of the keys from the json.</p>
<p>If you try to read that the usual way:
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">json</span>
<p><span style="color:#f8f8f2;">user_id</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">{</span>
    <span style="color:#ae81ff;">101</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Mario"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">102</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"John"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">103</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Lewis"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">105</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Andrew"</span>
<span style="color:#f8f8f2;">}</span></p>
<p><span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">i</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">range(</span><span style="color:#ae81ff;">101</span><span style="color:#f8f8f2;">,</span><span style="color:#ae81ff;">106</span><span style="color:#f8f8f2;">):</span>
    <span style="color:#66d9ef;">print</span><span style="color:#f8f8f2;">(user_id[i])</span>
</p></pre>
You will have this error:
<p><img class="alignnone size-full wp-image-139" src="2017/03/img1.png" alt="img1" width="872" height="206">
Because you are referencing an element that doesn't exists.</p>
<p>You could solve this problem by using a Try - Except statement, but that will make the code longer and less readable.</p>
<p>The best way to fix this is by using .get():
</p>
<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">json</span>
<p><span style="color:#f8f8f2;">user_id</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">{</span>
    <span style="color:#ae81ff;">101</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Mario"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">102</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"John"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">103</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Lewis"</span><span style="color:#f8f8f2;">,</span>
    <span style="color:#ae81ff;">105</span><span style="color:#f8f8f2;">:</span> <span style="color:#e6db74;">"Andrew"</span>
<span style="color:#f8f8f2;">}</span></p>
<p><span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">i</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">range(</span><span style="color:#ae81ff;">101</span><span style="color:#f8f8f2;">,</span><span style="color:#ae81ff;">106</span><span style="color:#f8f8f2;">):</span>
    <span style="color:#66d9ef;">print</span><span style="color:#f8f8f2;">(user_id</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">get(i,</span><span style="color:#e6db74;">"ND"</span><span style="color:#f8f8f2;">))</span>
</p></pre>
The method: ".get()" extract the element from the json as usual, but when the value doesn't exit it returns a value chosen by the user.
<p>This is really lifesaving when working with json.</p>
</div>
    </div>
    </article><article class="post h-entry post-text"><header><h1 class="post-title p-name"><a href="posts/2017/02/07/python-clean-sql-views-for-documentation.html" class="u-url">Python: Clean SQL views for documentation</a></h1>
        <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">Umberto Grando</span></p>
            <p class="dateline"><a href="posts/2017/02/07/python-clean-sql-views-for-documentation.html" rel="bookmark"><time class="post-date published dt-published" datetime="2017-02-07T17:47:19+00:00" title="2017-02-07 17:47">2017-02-07 17:47</time></a></p>
                <p class="commentline">
        
    <a href="posts/2017/02/07/python-clean-sql-views-for-documentation.html#disqus_thread" data-disqus-identifier="cache/posts/2017/02/07/python-clean-sql-views-for-documentation.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p></p>
<p>One of the most tedious tasks of working with databases is to write and maintain documentation, in particular writing reports from tables and views.</p>
<p>So why not try to make this task a bit less heavy by using Python?
</p>
<h6>Step0-The input and the output</h6>
The script requires that the views are created using create view.
Example:
<h6>Right click on view</h6>
<img class="alignnone  wp-image-107" src="2017/02/img1.png" alt="img1" width="477" height="298"><h6>Copy view</h6>
<img class="alignnone size-full wp-image-110" src="2017/02/img2.png" alt="img2" width="440" height="237"><h6>Output view after python script</h6>
<img class="alignnone size-full wp-image-121" src="2017/02/img3.png" alt="img3" width="424" height="224"><hr>
<h6>Step1 - Extract Columns Function</h6>

<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#66d9ef;">def</span> <span style="color:#a6e22e;">extract_columns</span><span style="color:#f8f8f2;">(in_txt):</span>
    <span style="color:#e6db74;">"""Simple function to extract columns between select and from"""</span>
    <span style="color:#75715e;"># Splitting by select i only choose text after select</span>
    <span style="color:#f8f8f2;">out_view</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">re</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">r'(?i)\bselect\b'</span><span style="color:#f8f8f2;">,in_txt)[</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">]</span>
    <span style="color:#75715e;"># Splitting by from i only choose text before from</span>
    <span style="color:#f8f8f2;">out_view</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">re</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">r'(?i)\bfrom\b'</span><span style="color:#f8f8f2;">,out_view)[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">]</span>
    <span style="color:#75715e;"># Cleaning extra spaces and tabs</span>
    <span style="color:#f8f8f2;">out_view</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span>
    <span style="color:#66d9ef;">return</span> <span style="color:#f8f8f2;">out_view</span>
</pre>

<p>Let's start by defining a function with the purpose of extracting only the columns from the script of a view. Thus ignoring everything before the Select statement and everything after the From statement.</p>
<hr>
<h6>Step2 -Let's start from the variables</h6>

<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#f92672;">import</span> <span style="color:#f8f8f2;">re</span>

<span style="color:#75715e;"># We open the file containing the view</span>
<span style="color:#f8f8f2;">view</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">extract_columns(open(</span><span style="color:#e6db74;">'input.txt'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">'r'</span><span style="color:#f8f8f2;">,encoding</span><span style="color:#f92672;">=</span><span style="color:#e6db74;">'utf-8'</span><span style="color:#f8f8f2;">)</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">read())</span>
<span style="color:#75715e;"># Now we insert text into the list and we create a new list</span>
<span style="color:#f8f8f2;">view_l</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">view</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\n</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">)</span>
<span style="color:#f8f8f2;">out_l</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">[]</span>
</pre>

<p>Now we declare the variables we are going to use.
</p>
<ul>
<li>view: contains the input text</li>
    <li>view_l: is a list created by splitting text by line</li>
    <li>out_l: is the output list</li>
</ul>
<hr>
<h6>Step3-Main Code</h6>

<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Now we loop through all the lines of the view</span>
<span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">num,line</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">enumerate(view_l):</span>
    <span style="color:#75715e;"># Clean extra spaces</span>
    <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span>
    <span style="color:#75715e;"># Remove Comments</span>
    <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">'--'</span><span style="color:#f8f8f2;">)[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">]</span>
    <span style="color:#75715e;"># Remove Commas</span>
    <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">replace(</span><span style="color:#e6db74;">','</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">''<span style="color:#ffffff;">,</span>1</span><span style="color:#f8f8f2;">)</span>
    <span style="color:#75715e;"># Substitute Tabs with Spaces</span>
    <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">replace(</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\t</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">' '</span><span style="color:#f8f8f2;">)</span>
    <span style="color:#75715e;"># While two spaces are in line we substitute the with one space</span>
    <span style="color:#66d9ef;">while</span> <span style="color:#e6db74;">'  '</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">line:</span>
        <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">replace(</span><span style="color:#e6db74;">'  '</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">' '</span><span style="color:#f8f8f2;">)</span>
    <span style="color:#75715e;"># Remove [ and ]</span>
    <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">=</span> <span style="color:#f8f8f2;">line</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">replace</span> <span style="color:#f8f8f2;">(</span><span style="color:#e6db74;">'['</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">''</span><span style="color:#f8f8f2;">)</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">replace(</span><span style="color:#e6db74;">']'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">''</span><span style="color:#f8f8f2;">)</span>
    <span style="color:#75715e;"># If line is not empty</span>
    <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">len(line)</span><span style="color:#f92672;">&gt;</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">:</span>
        <span style="color:#75715e;"># If line is not a comment</span>
        <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">line[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">]</span><span style="color:#f92672;">!=</span><span style="color:#e6db74;">'-'</span><span style="color:#f8f8f2;">:</span>
            <span style="color:#75715e;"># We add the new line to out_l</span>
            <span style="color:#f8f8f2;">out_l</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">append(re</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">split(</span><span style="color:#e6db74;">r'(?i)\bas\b'</span><span style="color:#f8f8f2;">,line))</span>
</pre>

<p>Finally we come to the main code.
The first part is a For loop, using the list we created in step2.
For each line the script removes useless characters and comments and then adds the line to the new list.</p>
<hr>
<h6>Step4-Output Text</h6>

<pre style="background:#272822;overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;margin:0;line-height:125%;"><span style="color:#75715e;"># Open output file</span>
<span style="color:#66d9ef;">with</span> <span style="color:#f8f8f2;">open(</span><span style="color:#e6db74;">'out.txt'</span><span style="color:#f8f8f2;">,</span><span style="color:#e6db74;">'w'</span><span style="color:#f8f8f2;">)</span> <span style="color:#66d9ef;">as</span> <span style="color:#f8f8f2;">out_txt:</span>
    <span style="color:#75715e;"># For line in output list</span>
    <span style="color:#66d9ef;">for</span> <span style="color:#f8f8f2;">line</span> <span style="color:#f92672;">in</span> <span style="color:#f8f8f2;">out_l:</span>
        <span style="color:#75715e;"># Try / Except to output all the values to the file separated by ','</span>
        <span style="color:#66d9ef;">print</span><span style="color:#f8f8f2;">(line)</span>
        <span style="color:#66d9ef;">if</span> <span style="color:#f8f8f2;">len(line)</span><span style="color:#f92672;">&gt;</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">:</span>
            <span style="color:#f8f8f2;">out_txt</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">write(</span><span style="color:#e6db74;">'as'</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">join(line[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">:</span><span style="color:#f92672;">-</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">])</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span><span style="color:#f92672;">+</span><span style="color:#e6db74;">'|'</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">str(line[</span><span style="color:#f92672;">-</span><span style="color:#ae81ff;">1</span><span style="color:#f8f8f2;">])</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span><span style="color:#f92672;">+</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\n</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">)</span>
        <span style="color:#66d9ef;">else</span><span style="color:#f8f8f2;">:</span>
            <span style="color:#f8f8f2;">out_txt</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">write(str(line[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">])</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span><span style="color:#f92672;">+</span><span style="color:#e6db74;">'|'</span><span style="color:#f92672;">+</span><span style="color:#f8f8f2;">str(line[</span><span style="color:#ae81ff;">0</span><span style="color:#f8f8f2;">])</span><span style="color:#f92672;">.</span><span style="color:#f8f8f2;">strip()</span><span style="color:#f92672;">+</span><span style="color:#e6db74;">'</span><span style="color:#ae81ff;">\n</span><span style="color:#e6db74;">'</span><span style="color:#f8f8f2;">)</span>
</pre>

<p>In the last part we write to an external file using a Try/Except to avoid IndexErrors.</p>
<p>This article is also available on <a href="https://powerbloggerbi.com">PowerBloggerBI</a></p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-1.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="pybistuff";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><footer id="footer"><p>Contents © 2017         <a href="mailto:inzaniak@gmail.com">Umberto Grando</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </div>
    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    
    
    
            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
